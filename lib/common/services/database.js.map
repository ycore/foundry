{"version":3,"file":"database.js","sourceRoot":"","sources":["../../../../src/common/services/database.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,gBAAgB,CAAC;AAGzC,sHAAsH;AACtH,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,GAAG,EAAE;IACnC,iDAAiD;IACjD,IAAI,MAAM,CAAC;IACX,8CAA8C;IAC9C,OAAO,CAAC,OAA2C,EAAE,MAAW,EAAE,EAAE;IAClE,sDAAsD;IACtD,CAAC,MAAM,KAAK,OAAO,CAAgB,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE;QACjE,MAAM;QACN,MAAM,EAAE,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,KAAK,aAAa;KAC7D,CAAC,CAAC,CAAC;AACR,CAAC,CAAC,EAAE,CAAC","sourcesContent":["import { drizzle } from 'drizzle-orm/d1';\nimport type { AppLoadContext } from 'react-router';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get#smart_self-overwriting_lazy_getters\nexport const resolveDatabase = (() => {\n  // biome-ignore lint/suspicious/noImplicitAnyLet:\n  let cached;\n  // biome-ignore lint/suspicious/noExplicitAny:\n  return (context: Pick<AppLoadContext, 'cloudflare'>, schema: any) =>\n    // biome-ignore lint/suspicious/noAssignInExpressions:\n    (cached ??= drizzle<typeof schema>(context.cloudflare.env.MAIN_D1, {\n      schema,\n      logger: context.cloudflare.env.ENVIRONMENT === 'development',\n    }));\n})();\n"]}