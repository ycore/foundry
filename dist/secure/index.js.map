{"version":3,"file":"index.js","sources":["../../src/secure/csrf/csrf.config.ts","../../../../node_modules/.bun/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs","../../src/secure/csrf/form.tsx","../../src/secure/csrf/SecureForm.tsx","../../src/secure/csrf/SecureFetcher.tsx","../../src/secure/csrf/SecureProvider.tsx","../../src/secure/rate-limiter/rate-limiter.config.ts","../../src/secure/index.ts"],"sourcesContent":["import type { CSRFConfig } from './@types/csrf.types';\n\n/**\n * Default CSRF configuration\n * Can be overridden in app's config.system.ts\n */\nexport const defaultCSRFConfig: CSRFConfig = {\n  secretKey: 'UNCONFIGURED',\n  cookieName: '__csrf',\n  cookie: {\n    httpOnly: true,\n    sameSite: 'lax',\n    path: '/',\n    secure: true,\n    maxAge: undefined, // Session cookie by default\n  },\n};\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { Label } from '@ycore/componentry/vibrant';\nimport clsx from 'clsx';\nimport React from 'react';\nimport type { FormErrorProps, FormFieldContextValue, FormFieldProps } from './@types/form.types';\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null);\n\nexport { Form } from 'react-router';\n\nexport function FormField({ label, description, error, className, children }: FormFieldProps): React.JSX.Element {\n  const id = React.useId();\n  const fieldId = `${id}-field`;\n  const descriptionId = `${id}-description`;\n  const errorId = `${id}-error`;\n  const hasError = Boolean(error);\n\n  const contextValue = React.useMemo(() => ({ fieldId, descriptionId, errorId, hasError }), [fieldId, descriptionId, errorId, hasError]);\n\n  const enhancedChildren = React.Children.map(children, child => {\n    if (!React.isValidElement(child)) return child;\n\n    const childProps = child.props as any;\n    if (childProps.name) {\n      const ariaDescribedBy = [description && descriptionId, error && errorId].filter(Boolean).join(' ') || undefined;\n\n      return React.cloneElement(child as React.ReactElement<any>, {\n        id: childProps.id || fieldId,\n        'aria-invalid': hasError || undefined,\n        'aria-describedby': ariaDescribedBy,\n        'data-error': hasError || undefined,\n      });\n    }\n\n    return child;\n  });\n\n  return (\n    <FormFieldContext.Provider value={contextValue}>\n      <div className={clsx('space-y-2', className)} data-slot=\"form-field\">\n        {label && (\n          <Label htmlFor={fieldId} data-slot=\"form-label\" data-error={hasError} className={clsx(hasError && 'text-destructive')}>\n            {label}\n          </Label>\n        )}\n\n        {enhancedChildren}\n\n        {description && !error && (\n          <p id={descriptionId} data-slot=\"form-description\" className=\"text-muted-foreground text-sm\">\n            {description}\n          </p>\n        )}\n\n        {error && <FormError id={errorId} error={error} />}\n      </div>\n    </FormFieldContext.Provider>\n  );\n}\n\nexport function FormError({ error, className, id }: FormErrorProps): React.JSX.Element | null {\n  if (!error) {\n    return null;\n  }\n\n  return (\n    <p id={id} data-slot=\"form-error\" className={clsx('text-destructive text-sm', className)}>\n      {error}\n    </p>\n  );\n}\n\nexport function useFormField() {\n  const context = React.useContext(FormFieldContext);\n\n  if (!context) {\n    throw new Error('useFormField must be used within a FormField');\n  }\n\n  return context;\n}\n","import { Label } from '@ycore/componentry/vibrant';\nimport type { FieldErrors } from '@ycore/forge/result';\nimport clsx from 'clsx';\nimport React from 'react';\nimport { Form } from 'react-router';\nimport { AuthenticityTokenInput, useAuthenticityToken } from 'remix-utils/csrf/react';\n\n// Types\nexport interface SecureFormProps extends React.ComponentProps<typeof Form> {\n  /** Override the CSRF token field name (optional) */\n  csrf_name?: string;\n  /** Form-level and field-level errors */\n  errors?: FieldErrors | null;\n  children?: React.ReactNode;\n}\n\nexport interface SecureFormFieldProps {\n  name: string;\n  label?: string;\n  description?: string;\n  error?: string | null;\n  required?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}\n\nexport interface SecureFormErrorProps {\n  error?: string | null;\n  className?: string;\n  id?: string;\n}\n\nconst CSRF_TOKER_ERROR = 'Form load error. Please refresh the page or contact support if the issue persists.' as const;\n\n// Context for passing errors down to field components\nconst SecureFormContext = React.createContext<{ errors: FieldErrors | null }>({ errors: null });\n\n/** Form with CSRF protection and error handling */\nexport function SecureForm({ children, csrf_name, errors, ...props }: SecureFormProps): React.JSX.Element {\n  const token = useAuthenticityToken();\n\n  // Use override if provided, otherwise use default 'csrf_token'\n  const tokenFieldName = csrf_name ?? 'csrf_token';\n  const contextValue = React.useMemo(() => ({ errors: errors || null }), [errors]);\n\n  return (\n    // if CSRF token is missing, avoid unsecured form\n    !token ? (\n      <div role=\"alert\" className=\"rounded-lg border border-destructive bg-destructive/10 p-4\">\n        <SecureFormError error={CSRF_TOKER_ERROR} />\n      </div>\n    ) : (\n      <SecureFormContext.Provider value={contextValue}>\n        <Form role=\"form\" {...props}>\n          <AuthenticityTokenInput name={tokenFieldName} />\n\n          {/* CSRF validation errors, if present */}\n          {errors?.csrf && <SecureFormError error={errors.csrf} className=\"mb-4\" />}\n\n          {/* General form errors, if present */}\n          {errors?.form && !errors.csrf && <SecureFormError error={errors.form} className=\"mb-4\" />}\n\n          {children}\n        </Form>\n      </SecureFormContext.Provider>\n    )\n  );\n}\n\n/** Form field with automatic error display and ARIA attributes */\nexport function SecureFormField({ name, label, description, error, required, className, children }: SecureFormFieldProps): React.JSX.Element {\n  const { errors } = React.useContext(SecureFormContext);\n  const fieldError = error || errors?.[name];\n  const errorId = fieldError ? `${name}-error` : undefined;\n\n  return (\n    <div className={clsx('space-y-2', className)}>\n      {label && (\n        <Label htmlFor={name}>\n          {label}\n          {required && <span className=\"ml-1 text-destructive\">*</span>}\n        </Label>\n      )}\n      {description && <p className=\"text-muted-foreground text-sm\">{description}</p>}\n      {React.Children.map(children, child => {\n        if (React.isValidElement(child)) {\n          return React.cloneElement(child as React.ReactElement<any>, {\n            id: (child.props as any).id || name,\n            name: (child.props as any).name || name,\n            'aria-invalid': fieldError ? true : undefined,\n            'aria-describedby': fieldError ? errorId : (child.props as any)['aria-describedby'],\n          });\n        }\n        return child;\n      })}\n      {fieldError && (\n        <p id={errorId} className=\"text-destructive text-sm\" role=\"alert\">\n          {fieldError}\n        </p>\n      )}\n    </div>\n  );\n}\n\n/** Displays form-level error messages */\nexport function SecureFormError({ error, className, id }: SecureFormErrorProps): React.JSX.Element | null {\n  if (!error) {\n    return null;\n  }\n\n  return (\n    <p id={id} data-slot=\"form-error\" className={clsx('text-destructive text-sm', className)} role=\"alert\">\n      {error}\n    </p>\n  );\n}\n\n/** Returns form field props with error handling */\nexport function useSecureFormField(name: string): { error?: string; 'aria-invalid'?: boolean; 'aria-describedby'?: string } {\n  const { errors } = React.useContext(SecureFormContext);\n  const error = errors?.[name];\n\n  if (!error) {\n    return {};\n  }\n\n  return {\n    error,\n    'aria-invalid': true,\n    'aria-describedby': `${name}-error`,\n  };\n}\n","import type { FieldErrors } from '@ycore/forge/result';\nimport { extractFieldErrors, isError } from '@ycore/forge/result';\nimport clsx from 'clsx';\nimport React from 'react';\nimport { type FetcherWithComponents, type SubmitOptions, useFetcher } from 'react-router';\nimport { AuthenticityTokenInput, useAuthenticityToken } from 'remix-utils/csrf/react';\n\n// Types\nexport interface SecureFetcherFormProps extends Omit<React.ComponentProps<'form'>, 'method' | 'action' | 'encType'> {\n  /** Override the CSRF token field name (optional) */\n  csrf_name?: string;\n  errors?: FieldErrors | null;\n  fetcher: FetcherWithComponents<unknown>;\n  children?: React.ReactNode;\n  method?: 'get' | 'post' | 'put' | 'patch' | 'delete';\n  action?: string;\n  encType?: 'application/x-www-form-urlencoded' | 'multipart/form-data' | 'text/plain';\n}\n\nexport interface UseSecureFetcherOptions {\n  key?: string;\n}\n\nexport interface SecureFetcherHandle<T = unknown> {\n  SecureForm: React.FC<Omit<SecureFetcherFormProps, 'fetcher'>>;\n  submitSecure: (data: FormData, options?: SubmitOptions) => void;\n  errors: FieldErrors | null;\n  data: T | undefined;\n  state: 'idle' | 'submitting' | 'loading';\n  Form: FetcherWithComponents<T>['Form'];\n  submit: FetcherWithComponents<T>['submit'];\n  load: FetcherWithComponents<T>['load'];\n  formData: FormData | undefined;\n  formMethod: 'get' | 'post' | 'put' | 'patch' | 'delete' | undefined;\n  formAction: string | undefined;\n  formEncType: 'application/x-www-form-urlencoded' | 'multipart/form-data' | 'application/json' | 'text/plain' | undefined;\n}\n\n/** Fetcher with built-in CSRF protection */\nexport function useSecureFetcher<T = unknown>({ key }: UseSecureFetcherOptions = {}): SecureFetcherHandle<T> {\n  const fetcher = useFetcher<T>({ key });\n  const token = useAuthenticityToken();\n\n  // Extract errors from fetcher data if present\n  const errors = React.useMemo(() => {\n    if (fetcher.data && isError(fetcher.data)) {\n      return extractFieldErrors(fetcher.data);\n    }\n    return null;\n  }, [fetcher.data]);\n\n  // Secure submit function that automatically adds CSRF token\n  const submitSecure = React.useCallback(\n    (data: FormData, options?: SubmitOptions) => {\n      const secureData = new FormData();\n\n      // Copy all existing form data\n      data.forEach((value, key) => {\n        secureData.append(key, value);\n      });\n\n      // Add CSRF token if not already present using default field name\n      if (!secureData.has('csrf_token') && token) {\n        secureData.append('csrf_token', token);\n      }\n\n      fetcher.submit(secureData, options);\n    },\n    [fetcher, token]\n  );\n\n  // SecureForm component bound to this fetcher\n  const SecureForm = React.useMemo(\n    () =>\n      React.forwardRef<HTMLFormElement, Omit<SecureFetcherFormProps, 'fetcher'>>(({ children, csrf_name, errors: explicitErrors, ...props }, ref) => (\n        <SecureFetcherForm ref={ref} fetcher={fetcher} csrf_name={csrf_name} errors={explicitErrors || errors} {...props}>\n          {children}\n        </SecureFetcherForm>\n      )),\n    [fetcher, errors]\n  );\n\n  SecureForm.displayName = 'SecureForm';\n\n  return {\n    SecureForm,\n    submitSecure,\n    errors,\n    data: fetcher.data as T | undefined,\n    state: fetcher.state,\n    Form: fetcher.Form,\n    submit: fetcher.submit,\n    load: fetcher.load,\n    formData: fetcher.formData,\n    formMethod: fetcher.formMethod?.toLowerCase() as 'get' | 'post' | 'put' | 'patch' | 'delete' | undefined,\n    formAction: fetcher.formAction,\n    formEncType: fetcher.formEncType,\n  };\n}\n\n/** Fetcher form with CSRF protection */\nexport const SecureFetcherForm = React.forwardRef<HTMLFormElement, SecureFetcherFormProps>(({ children, csrf_name, errors, fetcher, className, ...props }, ref) => {\n  // Use override if provided, otherwise use default 'csrf_token'\n  const tokenFieldName = csrf_name ?? 'csrf_token';\n  const FetcherForm = fetcher.Form;\n\n  return (\n    <FetcherForm ref={ref} className={className} {...props}>\n      {/* CSRF token hidden input */}\n      <AuthenticityTokenInput name={tokenFieldName} />\n\n      {/* Display CSRF validation error if present */}\n      {errors?.csrf && <SecureFetcherError error={errors.csrf} className=\"mb-4\" />}\n\n      {/* Display general form error if present (and no CSRF error) */}\n      {errors?.form && !errors.csrf && <SecureFetcherError error={errors.form} className=\"mb-4\" />}\n\n      {children}\n    </FetcherForm>\n  );\n});\n\nSecureFetcherForm.displayName = 'SecureFetcherForm';\n\n/** Displays fetcher error messages */\nexport function SecureFetcherError({ error, className, id }: { error?: string | null; className?: string; id?: string }): React.JSX.Element | null {\n  if (!error) {\n    return null;\n  }\n\n  return (\n    <p id={id} data-slot=\"form-error\" className={clsx('text-destructive text-sm', className)} role=\"alert\">\n      {error}\n    </p>\n  );\n}\n\n/** Field component for fetcher forms (reuses SecureFormField) */\nexport { SecureFormField as SecureFetcherField } from './SecureForm';\n\n/** Creates field props with error handling for fetchers */\nexport function createFetcherFieldProps(name: string, errors?: FieldErrors | null): { error?: string; 'aria-invalid'?: boolean; 'aria-describedby'?: string } {\n  const error = errors?.[name];\n\n  if (!error) {\n    return {};\n  }\n\n  return { error, 'aria-invalid': true, 'aria-describedby': `${name}-error` };\n}\n","import type { ReactNode } from 'react';\nimport { AuthenticityTokenProvider } from 'remix-utils/csrf/react';\n\nexport interface SecureProviderProps {\n  children: ReactNode;\n  token: string;\n}\n\n/** Provides CSRF protection using remix-utils token context */\nexport const SecureProvider: React.FC<SecureProviderProps> = ({ children, token }) => {\n  return <AuthenticityTokenProvider token={token}>{children}</AuthenticityTokenProvider>;\n};\n","import type { CloudflareProviderConfig, KvProviderConfig, RateLimiterConfig } from './@types/rate-limiter.types';\n\n/**\n * Default rate limiter configuration\n *\n * IMPORTANT: This configuration uses 'UNCONFIGURED' placeholders that MUST be\n * replaced by the consuming application in config.system.ts\n *\n * The app is responsible for:\n * - Configuring kvBinding to match a KV namespace from wrangler.jsonc\n * - Configuring limiterBinding to match a RateLimit binding from wrangler.jsonc\n * - Defining explicit route configurations with provider assignments\n *\n * Rate limiting is ONLY applied to routes explicitly configured in the routes array.\n */\nexport const defaultRateLimiterConfig: RateLimiterConfig = {\n  providers: [\n    {\n      id: 'default-kv',\n      type: 'kv',\n      options: {\n        kvBinding: 'UNCONFIGURED',\n      },\n      limits: {\n        maxRequests: 10,\n        windowMs: 60 * 1000, // 1 minute window\n      },\n    } satisfies KvProviderConfig,\n    {\n      id: 'default-cloudflare',\n      type: 'cloudflare',\n      options: {\n        limiterBinding: 'UNCONFIGURED',\n      },\n    } satisfies CloudflareProviderConfig,\n  ],\n  routes: [\n    // Example route configuration (uncomment and customize as needed):\n    // {\n    //   pattern: '/api/**',\n    //   provider: 'default-kv',\n    //   methods: ['POST', 'PUT', 'DELETE', 'PATCH'],\n    // },\n  ],\n  conditions: {\n    skipPaths: ['/favicon.ico'],\n  },\n};\n","export type { CSRFConfig, CSRFData } from './csrf/@types/csrf.types';\nexport { defaultCSRFConfig } from './csrf/csrf.config';\nexport { FormError, FormField, useFormField } from './csrf/form';\nexport type { SecureFetcherFormProps, SecureFetcherHandle, UseSecureFetcherOptions } from './csrf/SecureFetcher';\nexport { createFetcherFieldProps, SecureFetcherError, useSecureFetcher } from './csrf/SecureFetcher';\nexport { SecureProvider } from './csrf/SecureProvider';\nexport type { RateLimiterConfig } from './rate-limiter/@types/rate-limiter.types';\nexport { defaultRateLimiterConfig } from './rate-limiter/rate-limiter.config';\n\nimport * as SecureFormComponents from './csrf/SecureForm';\nimport { SecureForm as SecureFormComponent } from './csrf/SecureForm';\nexport const SecureForm = Object.assign(SecureFormComponent, {\n  Field: SecureFormComponents.SecureFormField,\n  Error: SecureFormComponents.SecureFormError,\n});\n\nimport * as FormComponents from './csrf/form';\nimport { Form as FormComponent } from './csrf/form';\nexport const Form: typeof FormComponent & {\n  Field: typeof FormComponents.FormField;\n  Error: typeof FormComponents.FormError;\n} = Object.assign(FormComponent, {\n  Field: FormComponents.FormField,\n  Error: FormComponents.FormError,\n});\n\nimport * as SecureFetcherComponents from './csrf/SecureFetcher';\nimport { SecureFetcherForm as SecureFetcherFormComponent } from './csrf/SecureFetcher';\nexport const SecureFetcher: typeof SecureFetcherFormComponent & {\n  Field: typeof SecureFetcherComponents.SecureFetcherField;\n  Error: typeof SecureFetcherComponents.SecureFetcherError;\n} = Object.assign(SecureFetcherFormComponent, {\n  Field: SecureFetcherComponents.SecureFetcherField,\n  Error: SecureFetcherComponents.SecureFetcherError,\n});\n"],"names":["SecureForm","Form","key","SecureFormComponent","SecureFormComponents.SecureFormField","SecureFormComponents.SecureFormError","FormComponent","FormComponents.FormField","FormComponents.FormError","SecureFetcherFormComponent","SecureFetcherComponents.SecureFetcherField","SecureFetcherComponents.SecureFetcherError"],"mappings":"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","x_google_ignoreList":[1]}